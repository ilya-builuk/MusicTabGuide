/* Jison generated parser */
var vextab_parser=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,e:3,maybe_vextab:4,EOF:5,vextab:6,stave:7,TABSTAVE:8,maybe_options:9,stave_data:10,OPTIONS:11,options:12,stave_additions:13,TEXT:14,text:15,NOTES:16,notes:17,WORD:18,"=":19,STR:20,",":21,lingo:22,line:23,chord:24,time:25,bar:26,"[":27,"]":28,tuplets:29,annotations:30,rest:31,"|":32,":":33,frets:34,maybe_decorator:35,"/":36,string:37,chord_line:38,".":39,"(":40,")":41,articulation:42,NUMBER:43,abc:44,timed_fret:45,time_values:46,maybe_dot:47,time_unit:48,maybe_slash:49,w:50,h:51,q:52,d:53,S:54,"-":55,s:56,t:57,T:58,b:59,p:60,v:61,V:62,u:63,"^":64,$:65,annotation_words:66,"#":67,ABC:68,abc_accidental:69,"@":70,n:71,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",8:"TABSTAVE",11:"OPTIONS",14:"TEXT",16:"NOTES",18:"WORD",19:"=",20:"STR",21:",",27:"[",28:"]",32:"|",33:":",36:"/",39:".",40:"(",41:")",43:"NUMBER",50:"w",51:"h",52:"q",53:"d",54:"S",55:"-",56:"s",57:"t",58:"T",59:"b",60:"p",61:"v",62:"V",63:"u",64:"^",65:"$",67:"#",68:"ABC",70:"@",71:"n"},productions_:[0,[3,2],[4,0],[4,1],[6,1],[6,2],[7,3],[7,2],[7,2],[10,1],[10,2],[13,2],[13,2],[9,0],[9,1],[12,3],[12,4],[15,1],[15,3],[17,1],[17,2],[22,1],[22,1],[22,1],[22,1],[22,1],[22,1],[22,1],[22,1],[22,1],[26,1],[26,3],[26,3],[26,3],[26,3],[26,3],[23,4],[38,1],[38,3],[24,4],[24,5],[34,1],[34,1],[34,2],[34,4],[45,5],[45,1],[45,5],[45,1],[25,3],[46,2],[48,1],[48,1],[48,1],[48,1],[47,0],[47,1],[49,0],[49,1],[37,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[35,1],[35,1],[35,1],[35,1],[35,0],[29,3],[29,5],[30,3],[66,1],[66,3],[31,2],[31,3],[44,2],[69,1],[69,2],[69,1],[69,2],[69,1],[69,0]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return Vex.Flow.VexTab.DEBUG&&o[a-1]&&(console.log(o[a-1]),console.log(JSON.stringify(o[a-1],null," "))),o[a-1];case 2:this.$=null;break;case 3:this.$=o[a];break;case 4:this.$=[o[a]];break;case 5:this.$=[].concat(o[a-1],o[a]);break;case 6:this.$={element:"stave",options:o[a-1],notes:o[a].notes,text:o[a].text,_l:u[a-2].first_line,_c:u[a-2].first_column};break;case 7:this.$={element:"stave",options:o[a],_l:u[a-1].first_line,_c:u[a-1].first_column};break;case 8:this.$={element:"options",params:o[a],_l:u[a-1].first_line,_c:u[a-1].first_column};break;case 9:this.$=o[a];break;case 10:var f=[].concat(o[a-1].text,o[a].text),l=[].concat(o[a-1].notes,o[a].notes);this.$={text:f,notes:l};break;case 11:this.$={text:o[a],notes:[]};break;case 12:this.$={notes:o[a],text:[]};break;case 13:this.$=null;break;case 14:this.$=o[a];break;case 15:this.$=[{key:o[a-2],value:o[a],_l:u[a-2].first_line,_c:u[a-2].first_column}];break;case 16:this.$=[].concat(o[a-3],[{key:o[a-2],value:o[a],_l:u[a-2].first_line,_c:u[a-2].first_column}]);break;case 17:this.$=[{text:o[a],_l:u[a].first_line,_c:u[a].first_column}];break;case 18:this.$=[].concat(o[a-2],{text:o[a],_l:u[a].first_line,_c:u[a].first_column});break;case 19:this.$=o[a];break;case 20:this.$=[].concat(o[a-1],o[a]);break;case 21:this.$=o[a];break;case 22:this.$=o[a];break;case 23:this.$=o[a];break;case 24:this.$=[{command:"bar",type:o[a],_l:u[a].first_line,_c:u[a].first_column}];break;case 25:this.$=[{command:"open_beam",_l:u[a].first_line,_c:u[a].first_column}];break;case 26:this.$=[{command:"close_beam",_l:u[a].first_line,_c:u[a].first_column}];break;case 27:this.$=[{command:"tuplet",params:o[a],_l:u[a].first_line,_c:u[a].first_column}];break;case 28:this.$=[{command:"annotations",params:o[a],_l:u[a].first_line,_c:u[a].first_column}];break;case 29:this.$=[{command:"rest",params:o[a]}];break;case 30:this.$="single";break;case 31:this.$="double";break;case 32:this.$="end";break;case 33:this.$="repeat-end";break;case 34:this.$="repeat-begin";break;case 35:this.$="repeat-both";break;case 36:_.extend(_.last(o[a-3]),{decorator:o[a-2]}),_.each(o[a-3],function(e){e.string=o[a]}),this.$=o[a-3];break;case 37:this.$=o[a];break;case 38:this.$=[].concat(o[a-2],o[a]);break;case 39:this.$={chord:o[a-2],decorator:o[a]};break;case 40:this.$={chord:o[a-2],articulation:o[a-4],decorator:o[a]};break;case 41:this.$=[{fret:o[a],_l:u[a].first_line,_c:u[a].first_column}];break;case 42:this.$=[{abc:o[a],_l:u[a].first_line,_c:u[a].first_column}];break;case 43:this.$=[_.extend(o[a],{articulation:o[a-1]})];break;case 44:_.extend(_.last(o[a-3]),{decorator:o[a-2]}),_.extend(o[a],{articulation:o[a-1]}),o[a-3].push(o[a]),this.$=o[a-3];break;case 45:this.$={time:o[a-3],dot:o[a-2],fret:o[a],_l:u[a-4].first_line,_c:u[a-4].first_column};break;case 46:this.$={fret:o[a],_l:u[a].first_line,_c:u[a].first_column};break;case 47:this.$={time:o[a-3],dot:o[a-2],abc:o[a]};break;case 48:this.$={abc:o[a],_l:u[a].first_line,_c:u[a].first_column};break;case 49:this.$={time:o[a-1],dot:o[a]};break;case 50:this.$=o[a-1]+o[a];break;case 51:this.$=o[a];break;case 52:this.$=o[a];break;case 53:this.$=o[a];break;case 54:this.$=o[a];break;case 55:this.$=!1;break;case 56:this.$=!0;break;case 57:this.$="";break;case 58:this.$="s";break;case 59:this.$=o[a];break;case 60:this.$="-";break;case 61:this.$="s";break;case 62:this.$="t";break;case 63:this.$="T";break;case 64:this.$="b";break;case 65:this.$="h";break;case 66:this.$="p";break;case 67:this.$="v";break;case 68:this.$="V";break;case 69:this.$="u";break;case 70:this.$="d";break;case 71:this.$=null;break;case 72:this.$={tuplet:o[a-1]};break;case 73:this.$={tuplet:o[a-3],notes:o[a-1]};break;case 74:this.$=o[a-1];break;case 75:this.$=[o[a]];break;case 76:this.$=[].concat(o[a-2],o[a]);break;case 77:this.$={position:0};break;case 78:this.$={position:o[a-1]};break;case 79:this.$={key:o[a-1],accidental:o[a]};break;case 80:this.$="#";break;case 81:this.$="##";break;case 82:this.$="b";break;case 83:this.$="bb";break;case 84:this.$="n"}},table:[{3:1,4:2,5:[2,2],6:3,7:4,8:[1,5],11:[1,6]},{1:[3]},{5:[1,7]},{5:[2,3],7:8,8:[1,5],11:[1,6]},{5:[2,4],8:[2,4],11:[2,4]},{5:[2,13],8:[2,13],9:9,11:[2,13],12:10,14:[2,13],16:[2,13],18:[1,11]},{12:12,18:[1,11]},{1:[2,1]},{5:[2,5],8:[2,5],11:[2,5]},{5:[2,7],8:[2,7],10:13,11:[2,7],13:14,14:[1,15],16:[1,16]},{5:[2,14],8:[2,14],11:[2,14],14:[2,14],16:[2,14],18:[1,17]},{19:[1,18]},{5:[2,8],8:[2,8],11:[2,8],18:[1,17]},{5:[2,6],8:[2,6],11:[2,6],13:19,14:[1,15],16:[1,16]},{5:[2,9],8:[2,9],11:[2,9],14:[2,9],16:[2,9]},{15:20,20:[1,21]},{17:22,19:[1,38],22:23,23:24,24:25,25:26,26:27,27:[1,28],28:[1,29],29:30,30:31,31:32,32:[1,37],33:[1,36],34:33,40:[1,34],42:35,43:[1,42],44:43,51:[1,49],55:[1,44],56:[1,45],57:[1,46],58:[1,47],59:[1,48],60:[1,50],64:[1,39],65:[1,40],67:[1,41],68:[1,51]},{19:[1,52]},{18:[1,53]},{5:[2,10],8:[2,10],11:[2,10],14:[2,10],16:[2,10]},{5:[2,11],8:[2,11],11:[2,11],14:[2,11],16:[2,11],21:[1,54]},{5:[2,17],8:[2,17],11:[2,17],14:[2,17],16:[2,17],21:[2,17]},{5:[2,12],8:[2,12],11:[2,12],14:[2,12],16:[2,12],19:[1,38],22:55,23:24,24:25,25:26,26:27,27:[1,28],28:[1,29],29:30,30:31,31:32,32:[1,37],33:[1,36],34:33,40:[1,34],42:35,43:[1,42],44:43,51:[1,49],55:[1,44],56:[1,45],57:[1,46],58:[1,47],59:[1,48],60:[1,50],64:[1,39],65:[1,40],67:[1,41],68:[1,51]},{5:[2,19],8:[2,19],11:[2,19],14:[2,19],16:[2,19],19:[2,19],27:[2,19],28:[2,19],32:[2,19],33:[2,19],40:[2,19],43:[2,19],51:[2,19],55:[2,19],56:[2,19],57:[2,19],58:[2,19],59:[2,19],60:[2,19],64:[2,19],65:[2,19],67:[2,19],68:[2,19]},{5:[2,21],8:[2,21],11:[2,21],14:[2,21],16:[2,21],19:[2,21],27:[2,21],28:[2,21],32:[2,21],33:[2,21],40:[2,21],43:[2,21],51:[2,21],55:[2,21],56:[2,21],57:[2,21],58:[2,21],59:[2,21],60:[2,21],64:[2,21],65:[2,21],67:[2,21],68:[2,21]},{5:[2,22],8:[2,22],11:[2,22],14:[2,22],16:[2,22],19:[2,22],27:[2,22],28:[2,22],32:[2,22],33:[2,22],40:[2,22],43:[2,22],51:[2,22],55:[2,22],56:[2,22],57:[2,22],58:[2,22],59:[2,22],60:[2,22],64:[2,22],65:[2,22],67:[2,22],68:[2,22]},{5:[2,23],8:[2,23],11:[2,23],14:[2,23],16:[2,23],19:[2,23],27:[2,23],28:[2,23],32:[2,23],33:[2,23],40:[2,23],43:[2,23],51:[2,23],55:[2,23],56:[2,23],57:[2,23],58:[2,23],59:[2,23],60:[2,23],64:[2,23],65:[2,23],67:[2,23],68:[2,23]},{5:[2,24],8:[2,24],11:[2,24],14:[2,24],16:[2,24],19:[2,24],27:[2,24],28:[2,24],32:[2,24],33:[2,24],40:[2,24],43:[2,24],51:[2,24],55:[2,24],56:[2,24],57:[2,24],58:[2,24],59:[2,24],60:[2,24],64:[2,24],65:[2,24],67:[2,24],68:[2,24]},{5:[2,25],8:[2,25],11:[2,25],14:[2,25],16:[2,25],19:[2,25],27:[2,25],28:[2,25],32:[2,25],33:[2,25],40:[2,25],43:[2,25],51:[2,25],55:[2,25],56:[2,25],57:[2,25],58:[2,25],59:[2,25],60:[2,25],64:[2,25],65:[2,25],67:[2,25],68:[2,25]},{5:[2,26],8:[2,26],11:[2,26],14:[2,26],16:[2,26],19:[2,26],27:[2,26],28:[2,26],32:[2,26],33:[2,26],40:[2,26],43:[2,26],51:[2,26],55:[2,26],56:[2,26],57:[2,26],58:[2,26],59:[2,26],60:[2,26],64:[2,26],65:[2,26],67:[2,26],68:[2,26]},{5:[2,27],8:[2,27],11:[2,27],14:[2,27],16:[2,27],19:[2,27],27:[2,27],28:[2,27],32:[2,27],33:[2,27],40:[2,27],43:[2,27],51:[2,27],55:[2,27],56:[2,27],57:[2,27],58:[2,27],59:[2,27],60:[2,27],64:[2,27],65:[2,27],67:[2,27],68:[2,27]},{5:[2,28],8:[2,28],11:[2,28],14:[2,28],16:[2,28],19:[2,28],27:[2,28],28:[2,28],32:[2,28],33:[2,28],40:[2,28],43:[2,28],51:[2,28],55:[2,28],56:[2,28],57:[2,28],58:[2,28],59:[2,28],60:[2,28],64:[2,28],65:[2,28],67:[2,28],68:[2,28]},{5:[2,29],8:[2,29],11:[2,29],14:[2,29],16:[2,29],19:[2,29],27:[2,29],28:[2,29],32:[2,29],33:[2,29],40:[2,29],43:[2,29],51:[2,29],55:[2,29],56:[2,29],57:[2,29],58:[2,29],59:[2,29],60:[2,29],64:[2,29],65:[2,29],67:[2,29],68:[2,29]},{35:56,36:[2,71],51:[2,71],53:[1,60],55:[2,71],56:[2,71],57:[2,71],58:[2,71],59:[2,71],60:[2,71],61:[1,57],62:[1,58],63:[1,59]},{23:62,34:33,38:61,42:63,43:[1,42],44:43,51:[1,49],55:[1,44],56:[1,45],57:[1,46],58:[1,47],59:[1,48],60:[1,50],68:[1,51]},{33:[1,66],40:[1,64],43:[1,67],44:68,45:65,68:[1,51]},{43:[1,71],46:69,48:70,50:[1,72],51:[1,73],52:[1,74]},{5:[2,30],8:[2,30],11:[2,30],14:[2,30],16:[2,30],19:[2,30],27:[2,30],28:[2,30],32:[2,30],33:[2,30],40:[2,30],43:[2,30],51:[2,30],55:[2,30],56:[2,30],57:[2,30],58:[2,30],59:[2,30],60:[2,30],64:[2,30],65:[2,30],67:[2,30],68:[2,30]},{32:[1,75],33:[1,76]},{43:[1,77]},{18:[1,79],66:78},{43:[1,81],67:[1,80]},{36:[2,41],51:[2,41],53:[2,41],55:[2,41],56:[2,41],57:[2,41],58:[2,41],59:[2,41],60:[2,41],61:[2,41],62:[2,41],63:[2,41]},{36:[2,42],51:[2,42],53:[2,42],55:[2,42],56:[2,42],57:[2,42],58:[2,42],59:[2,42],60:[2,42],61:[2,42],62:[2,42],63:[2,42]},{33:[2,60],40:[2,60],43:[2,60],68:[2,60]},{33:[2,61],40:[2,61],43:[2,61],68:[2,61]},{33:[2,62],40:[2,62],43:[2,62],68:[2,62]},{33:[2,63],40:[2,63],43:[2,63],68:[2,63]},{33:[2,64],40:[2,64],43:[2,64],68:[2,64]},{33:[2,65],40:[2,65],43:[2,65],68:[2,65]},{33:[2,66],40:[2,66],43:[2,66],68:[2,66]},{36:[2,85],51:[2,85],53:[2,85],55:[2,85],56:[2,85],57:[2,85],58:[2,85],59:[2,85],60:[2,85],61:[2,85],62:[2,85],63:[2,85],67:[1,83],69:82,70:[1,84],71:[1,85]},{18:[1,86]},{5:[2,15],8:[2,15],11:[2,15],14:[2,15],16:[2,15],18:[2,15]},{20:[1,87]},{5:[2,20],8:[2,20],11:[2,20],14:[2,20],16:[2,20],19:[2,20],27:[2,20],28:[2,20],32:[2,20],33:[2,20],40:[2,20],43:[2,20],51:[2,20],55:[2,20],56:[2,20],57:[2,20],58:[2,20],59:[2,20],60:[2,20],64:[2,20],65:[2,20],67:[2,20],68:[2,20]},{36:[1,88],42:89,51:[1,49],55:[1,44],56:[1,45],57:[1,46],58:[1,47],59:[1,48],60:[1,50]},{5:[2,67],8:[2,67],11:[2,67],14:[2,67],16:[2,67],19:[2,67],27:[2,67],28:[2,67],32:[2,67],33:[2,67],36:[2,67],40:[2,67],43:[2,67],51:[2,67],55:[2,67],56:[2,67],57:[2,67],58:[2,67],59:[2,67],60:[2,67],64:[2,67],65:[2,67],67:[2,67],68:[2,67]},{5:[2,68],8:[2,68],11:[2,68],14:[2,68],16:[2,68],19:[2,68],27:[2,68],28:[2,68],32:[2,68],33:[2,68],36:[2,68],40:[2,68],43:[2,68],51:[2,68],55:[2,68],56:[2,68],57:[2,68],58:[2,68],59:[2,68],60:[2,68],64:[2,68],65:[2,68],67:[2,68],68:[2,68]},{5:[2,69],8:[2,69],11:[2,69],14:[2,69],16:[2,69],19:[2,69],27:[2,69],28:[2,69],32:[2,69],33:[2,69],36:[2,69],40:[2,69],43:[2,69],51:[2,69],55:[2,69],56:[2,69],57:[2,69],58:[2,69],59:[2,69],60:[2,69],64:[2,69],65:[2,69],67:[2,69],68:[2,69]},{5:[2,70],8:[2,70],11:[2,70],14:[2,70],16:[2,70],19:[2,70],27:[2,70],28:[2,70],32:[2,70],33:[2,70],36:[2,70],40:[2,70],43:[2,70],51:[2,70],55:[2,70],56:[2,70],57:[2,70],58:[2,70],59:[2,70],60:[2,70],64:[2,70],65:[2,70],67:[2,70],68:[2,70]},{39:[1,91],41:[1,90]},{39:[2,37],41:[2,37]},{33:[1,66],43:[1,67],44:68,45:65,68:[1,51]},{23:62,34:33,38:92,42:63,43:[1,42],44:43,51:[1,49],55:[1,44],56:[1,45],57:[1,46],58:[1,47],59:[1,48],60:[1,50],68:[1,51]},{36:[2,43],51:[2,43],53:[2,43],55:[2,43],56:[2,43],57:[2,43],58:[2,43],59:[2,43],60:[2,43],61:[2,43],62:[2,43],63:[2,43]},{43:[1,71],46:93,48:70,50:[1,72],51:[1,73],52:[1,74]},{36:[2,46],51:[2,46],53:[2,46],55:[2,46],56:[2,46],57:[2,46],58:[2,46],59:[2,46],60:[2,46],61:[2,46],62:[2,46],63:[2,46]},{36:[2,48],51:[2,48],53:[2,48],55:[2,48],56:[2,48],57:[2,48],58:[2,48],59:[2,48],60:[2,48],61:[2,48],62:[2,48],63:[2,48]},{5:[2,55],8:[2,55],11:[2,55],14:[2,55],16:[2,55],19:[2,55],27:[2,55],28:[2,55],32:[2,55],33:[2,55],40:[2,55],43:[2,55],47:94,51:[2,55],53:[1,95],55:[2,55],56:[2,55],57:[2,55],58:[2,55],59:[2,55],60:[2,55],64:[2,55],65:[2,55],67:[2,55],68:[2,55]},{5:[2,57],8:[2,57],11:[2,57],14:[2,57],16:[2,57],19:[2,57],27:[2,57],28:[2,57],32:[2,57],33:[2,57],40:[2,57],43:[2,57],49:96,51:[2,57],53:[2,57],54:[1,97],55:[2,57],56:[2,57],57:[2,57],58:[2,57],59:[2,57],60:[2,57],64:[2,57],65:[2,57],67:[2,57],68:[2,57]},{5:[2,51],8:[2,51],11:[2,51],14:[2,51],16:[2,51],19:[2,51],27:[2,51],28:[2,51],32:[2,51],33:[2,51],40:[2,51],43:[2,51],51:[2,51],53:[2,51],54:[2,51],55:[2,51],56:[2,51],57:[2,51],58:[2,51],59:[2,51],60:[2,51],64:[2,51],65:[2,51],67:[2,51],68:[2,51]},{5:[2,52],8:[2,52],11:[2,52],14:[2,52],16:[2,52],19:[2,52],27:[2,52],28:[2,52],32:[2,52],33:[2,52],40:[2,52],43:[2,52],51:[2,52],53:[2,52],54:[2,52],55:[2,52],56:[2,52],57:[2,52],58:[2,52],59:[2,52],60:[2,52],64:[2,52],65:[2,52],67:[2,52],68:[2,52]},{5:[2,53],8:[2,53],11:[2,53],14:[2,53],16:[2,53],19:[2,53],27:[2,53],28:[2,53],32:[2,53],33:[2,53],40:[2,53],43:[2,53],51:[2,53],53:[2,53],54:[2,53],55:[2,53],56:[2,53],57:[2,53],58:[2,53],59:[2,53],60:[2,53],64:[2,53],65:[2,53],67:[2,53],68:[2,53]},{5:[2,54],8:[2,54],11:[2,54],14:[2,54],16:[2,54],19:[2,54],27:[2,54],28:[2,54],32:[2,54],33:[2,54],40:[2,54],43:[2,54],51:[2,54],53:[2,54],54:[2,54],55:[2,54],56:[2,54],57:[2,54],58:[2,54],59:[2,54],60:[2,54],64:[2,54],65:[2,54],67:[2,54],68:[2,54]},{19:[1,99],32:[1,98],33:[1,100]},{32:[1,101],33:[1,102]},{21:[1,104],64:[1,103]},{21:[1,106],65:[1,105]},{21:[2,75],65:[2,75]},{5:[2,77],8:[2,77],11:[2,77],14:[2,77],16:[2,77],19:[2,77],27:[2,77],28:[2,77],32:[2,77],33:[2,77],40:[2,77],43:[2,77],51:[2,77],55:[2,77],56:[2,77],57:[2,77],58:[2,77],59:[2,77],60:[2,77],64:[2,77],65:[2,77],67:[2,77],68:[2,77]},{67:[1,107]},{36:[2,79],51:[2,79],53:[2,79],55:[2,79],56:[2,79],57:[2,79],58:[2,79],59:[2,79],60:[2,79],61:[2,79],62:[2,79],63:[2,79]},{36:[2,80],51:[2,80],53:[2,80],55:[2,80],56:[2,80],57:[2,80],58:[2,80],59:[2,80],60:[2,80],61:[2,80],62:[2,80],63:[2,80],67:[1,108]},{36:[2,82],51:[2,82],53:[2,82],55:[2,82],56:[2,82],57:[2,82],58:[2,82],59:[2,82],60:[2,82],61:[2,82],62:[2,82],63:[2,82],70:[1,109]},{36:[2,84],51:[2,84],53:[2,84],55:[2,84],56:[2,84],57:[2,84],58:[2,84],59:[2,84],60:[2,84],61:[2,84],62:[2,84],63:[2,84]},{5:[2,16],8:[2,16],11:[2,16],14:[2,16],16:[2,16],18:[2,16]},{5:[2,18],8:[2,18],11:[2,18],14:[2,18],16:[2,18],21:[2,18]},{37:110,43:[1,111]},{33:[1,66],43:[1,67],44:68,45:112,68:[1,51]},{5:[2,71],8:[2,71],11:[2,71],14:[2,71],16:[2,71],19:[2,71],27:[2,71],28:[2,71],32:[2,71],33:[2,71],35:113,40:[2,71],43:[2,71],51:[2,71],53:[1,60],55:[2,71],56:[2,71],57:[2,71],58:[2,71],59:[2,71],60:[2,71],61:[1,57],62:[1,58],63:[1,59],64:[2,71],65:[2,71],67:[2,71],68:[2,71]},{23:114,34:33,42:63,43:[1,42],44:43,51:[1,49],55:[1,44],56:[1,45],57:[1,46],58:[1,47],59:[1,48],60:[1,50],68:[1,51]},{39:[1,91],41:[1,115]},{33:[2,55],47:116,53:[1,95]},{5:[2,49],8:[2,49],11:[2,49],14:[2,49],16:[2,49],19:[2,49],27:[2,49],28:[2,49],32:[2,49],33:[2,49],40:[2,49],43:[2,49],51:[2,49],55:[2,49],56:[2,49],57:[2,49],58:[2,49],59:[2,49],60:[2,49],64:[2,49],65:[2,49],67:[2,49],68:[2,49]},{5:[2,56],8:[2,56],11:[2,56],14:[2,56],16:[2,56],19:[2,56],27:[2,56],28:[2,56],32:[2,56],33:[2,56],40:[2,56],43:[2,56],51:[2,56],55:[2,56],56:[2,56],57:[2,56],58:[2,56],59:[2,56],60:[2,56],64:[2,56],65:[2,56],67:[2,56],68:[2,56]},{5:[2,50],8:[2,50],11:[2,50],14:[2,50],16:[2,50],19:[2,50],27:[2,50],28:[2,50],32:[2,50],33:[2,50],40:[2,50],43:[2,50],51:[2,50],53:[2,50],55:[2,50],56:[2,50],57:[2,50],58:[2,50],59:[2,50],60:[2,50],64:[2,50],65:[2,50],67:[2,50],68:[2,50]},{5:[2,58],8:[2,58],11:[2,58],14:[2,58],16:[2,58],19:[2,58],27:[2,58],28:[2,58],32:[2,58],33:[2,58],40:[2,58],43:[2,58],51:[2,58],53:[2,58],55:[2,58],56:[2,58],57:[2,58],58:[2,58],59:[2,58],60:[2,58],64:[2,58],65:[2,58],67:[2,58],68:[2,58]},{5:[2,31],8:[2,31],11:[2,31],14:[2,31],16:[2,31],19:[2,31],27:[2,31],28:[2,31],32:[2,31],33:[2,31],40:[2,31],43:[2,31],51:[2,31],55:[2,31],56:[2,31],57:[2,31],58:[2,31],59:[2,31],60:[2,31],64:[2,31],65:[2,31],67:[2,31],68:[2,31]},{5:[2,32],8:[2,32],11:[2,32],14:[2,32],16:[2,32],19:[2,32],27:[2,32],28:[2,32],32:[2,32],33:[2,32],40:[2,32],43:[2,32],51:[2,32],55:[2,32],56:[2,32],57:[2,32],58:[2,32],59:[2,32],60:[2,32],64:[2,32],65:[2,32],67:[2,32],68:[2,32]},{5:[2,34],8:[2,34],11:[2,34],14:[2,34],16:[2,34],19:[2,34],27:[2,34],28:[2,34],32:[2,34],33:[2,34],40:[2,34],43:[2,34],51:[2,34],55:[2,34],56:[2,34],57:[2,34],58:[2,34],59:[2,34],60:[2,34],64:[2,34],65:[2,34],67:[2,34],68:[2,34]},{5:[2,33],8:[2,33],11:[2,33],14:[2,33],16:[2,33],19:[2,33],27:[2,33],28:[2,33],32:[2,33],33:[2,33],40:[2,33],43:[2,33],51:[2,33],55:[2,33],56:[2,33],57:[2,33],58:[2,33],59:[2,33],60:[2,33],64:[2,33],65:[2,33],67:[2,33],68:[2,33]},{5:[2,35],8:[2,35],11:[2,35],14:[2,35],16:[2,35],19:[2,35],27:[2,35],28:[2,35],32:[2,35],33:[2,35],40:[2,35],43:[2,35],51:[2,35],55:[2,35],56:[2,35],57:[2,35],58:[2,35],59:[2,35],60:[2,35],64:[2,35],65:[2,35],67:[2,35],68:[2,35]},{5:[2,72],8:[2,72],11:[2,72],14:[2,72],16:[2,72],19:[2,72],27:[2,72],28:[2,72],32:[2,72],33:[2,72],40:[2,72],43:[2,72],51:[2,72],55:[2,72],56:[2,72],57:[2,72],58:[2,72],59:[2,72],60:[2,72],64:[2,72],65:[2,72],67:[2,72],68:[2,72]},{43:[1,117]},{5:[2,74],8:[2,74],11:[2,74],14:[2,74],16:[2,74],19:[2,74],27:[2,74],28:[2,74],32:[2,74],33:[2,74],40:[2,74],43:[2,74],51:[2,74],55:[2,74],56:[2,74],57:[2,74],58:[2,74],59:[2,74],60:[2,74],64:[2,74],65:[2,74],67:[2,74],68:[2,74]},{18:[1,118]},{5:[2,78],8:[2,78],11:[2,78],14:[2,78],16:[2,78],19:[2,78],27:[2,78],28:[2,78],32:[2,78],33:[2,78],40:[2,78],43:[2,78],51:[2,78],55:[2,78],56:[2,78],57:[2,78],58:[2,78],59:[2,78],60:[2,78],64:[2,78],65:[2,78],67:[2,78],68:[2,78]},{36:[2,81],51:[2,81],53:[2,81],55:[2,81],56:[2,81],57:[2,81],58:[2,81],59:[2,81],60:[2,81],61:[2,81],62:[2,81],63:[2,81]},{36:[2,83],51:[2,83],53:[2,83],55:[2,83],56:[2,83],57:[2,83],58:[2,83],59:[2,83],60:[2,83],61:[2,83],62:[2,83],63:[2,83]},{5:[2,36],8:[2,36],11:[2,36],14:[2,36],16:[2,36],19:[2,36],27:[2,36],28:[2,36],32:[2,36],33:[2,36],39:[2,36],40:[2,36],41:[2,36],43:[2,36],51:[2,36],55:[2,36],56:[2,36],57:[2,36],58:[2,36],59:[2,36],60:[2,36],64:[2,36],65:[2,36],67:[2,36],68:[2,36]},{5:[2,59],8:[2,59],11:[2,59],14:[2,59],16:[2,59],19:[2,59],27:[2,59],28:[2,59],32:[2,59],33:[2,59],39:[2,59],40:[2,59],41:[2,59],43:[2,59],51:[2,59],55:[2,59],56:[2,59],57:[2,59],58:[2,59],59:[2,59],60:[2,59],64:[2,59],65:[2,59],67:[2,59],68:[2,59]},{36:[2,44],51:[2,44],53:[2,44],55:[2,44],56:[2,44],57:[2,44],58:[2,44],59:[2,44],60:[2,44],61:[2,44],62:[2,44],63:[2,44]},{5:[2,39],8:[2,39],11:[2,39],14:[2,39],16:[2,39],19:[2,39],27:[2,39],28:[2,39],32:[2,39],33:[2,39],40:[2,39],43:[2,39],51:[2,39],55:[2,39],56:[2,39],57:[2,39],58:[2,39],59:[2,39],60:[2,39],64:[2,39],65:[2,39],67:[2,39],68:[2,39]},{39:[2,38],41:[2,38]},{5:[2,71],8:[2,71],11:[2,71],14:[2,71],16:[2,71],19:[2,71],27:[2,71],28:[2,71],32:[2,71],33:[2,71],35:119,40:[2,71],43:[2,71],51:[2,71],53:[1,60],55:[2,71],56:[2,71],57:[2,71],58:[2,71],59:[2,71],60:[2,71],61:[1,57],62:[1,58],63:[1,59],64:[2,71],65:[2,71],67:[2,71],68:[2,71]},{33:[1,120]},{64:[1,121]},{21:[2,76],65:[2,76]},{5:[2,40],8:[2,40],11:[2,40],14:[2,40],16:[2,40],19:[2,40],27:[2,40],28:[2,40],32:[2,40],33:[2,40],40:[2,40],43:[2,40],51:[2,40],55:[2,40],56:[2,40],57:[2,40],58:[2,40],59:[2,40],60:[2,40],64:[2,40],65:[2,40],67:[2,40],68:[2,40]},{43:[1,122],44:123,68:[1,51]},{5:[2,73],8:[2,73],11:[2,73],14:[2,73],16:[2,73],19:[2,73],27:[2,73],28:[2,73],32:[2,73],33:[2,73],40:[2,73],43:[2,73],51:[2,73],55:[2,73],56:[2,73],57:[2,73],58:[2,73],59:[2,73],60:[2,73],64:[2,73],65:[2,73],67:[2,73],68:[2,73]},{36:[2,45],51:[2,45],53:[2,45],55:[2,45],56:[2,45],57:[2,45],58:[2,45],59:[2,45],60:[2,45],61:[2,45],62:[2,45],63:[2,45]},{36:[2,47],51:[2,47],53:[2,47],55:[2,47],56:[2,47],57:[2,47],58:[2,47],59:[2,47],60:[2,47],61:[2,47],62:[2,47],63:[2,47]}],defaultActions:{7:[2,1]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}};Vex.L("Starting parser.");var t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:return this.begin("notes"),16;case 1:return 8;case 2:return 11;case 3:return this.begin("text"),14;case 4:return 18;case 5:return this.begin("annotations"),"$";case 6:return this.begin("notes"),"$";case 7:return 18;case 8:return 20;case 9:return 36;case 10:return"+";case 11:return 33;case 12:return 19;case 13:return 40;case 14:return 41;case 15:return 27;case 16:return 28;case 17:return 64;case 18:return 21;case 19:return 32;case 20:return 39;case 21:return 67;case 22:return 70;case 23:return 59;case 24:return 56;case 25:return 51;case 26:return 60;case 27:return 57;case 28:return 58;case 29:return 55;case 30:return 61;case 31:return 62;case 32:return 63;case 33:return 53;case 34:return 43;case 35:return 52;case 36:return 50;case 37:return 51;case 38:return 53;case 39:return 54;case 40:return 68;case 41:return 71;case 42:this.begin("INITIAL");break;case 43:break;case 44:return 5;case 45:return"INVALID"}},e.rules=[/^(?:notes\b)/,/^(?:tabstave\b)/,/^(?:options\b)/,/^(?:text\b)/,/^(?:[^\s=]+)/,/^(?:[$])/,/^(?:[$])/,/^(?:[^,$]+)/,/^(?:[^,\r\n]+)/,/^(?:\/)/,/^(?:\+)/,/^(?::)/,/^(?:=)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\^)/,/^(?:,)/,/^(?:\|)/,/^(?:\.)/,/^(?:#)/,/^(?:@)/,/^(?:[b])/,/^(?:[s])/,/^(?:[h])/,/^(?:[p])/,/^(?:[t])/,/^(?:[T])/,/^(?:[-])/,/^(?:[v])/,/^(?:[V])/,/^(?:[u])/,/^(?:[d])/,/^(?:[0-9]+)/,/^(?:[q])/,/^(?:[w])/,/^(?:[h])/,/^(?:[d])/,/^(?:[S])/,/^(?:[A-GX])/,/^(?:[n])/,/^(?:[\r\n]+)/,/^(?:\s+)/,/^(?:$)/,/^(?:.)/],e.conditions={notes:{rules:[0,1,2,3,5,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},text:{rules:[0,1,2,3,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,34,35,36,37,38,42,43,44,45],inclusive:!0},annotations:{rules:[0,1,2,3,6,7,9,10,11,12,13,14,15,16,17,18,19,20,21,22,42,43,44,45],inclusive:!0},INITIAL:{rules:[0,1,2,3,4,9,10,11,12,13,14,15,16,17,18,19,20,21,22,42,43,44,45],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();typeof require!="undefined"&&typeof exports!="undefined"&&(exports.parser=vextab_parser,exports.Parser=vextab_parser.Parser,exports.parse=function(){return vextab_parser.parse.apply(vextab_parser,arguments)},exports.main=function(t){if(!t[1])throw new Error("Usage: "+t[0]+" FILE");var n,r;return typeof process!="undefined"?n=require("fs").readFileSync(require("path").resolve(t[1]),"utf8"):n=require("file").path(require("file").cwd()).join(t[1]).read({charset:"utf-8"}),exports.parser.parse(n)},typeof module!="undefined"&&require.main===module&&exports.main(typeof process!="undefined"?process.argv.slice(1):require("system").args));/**
 * VexFlow TabDiv
 * Copyright Mohit Muthanna 2010 <mohit@muthanna.com>
 */
Vex.Flow.TabDiv = function (e) { arguments.length > 0 && this.init(e) }, Vex.Flow.TabDiv.SEL = ".vex-tabdiv", Vex.Flow.TabDiv.ERROR_NOCANVAS = "<b>This browser does not support HTML5 Canvas</b><br/>Please use a modern browser such as <a href='http://google.com/chrome'>Google Chrome</a> or <a href='http://firefox.com'>Firefox</a>.", Vex.Flow.TabDiv.prototype.init = function (e) { this.sel = e, this.code = $(e).text(), $(e).empty(), this.width = $(e).attr("width") || 400, this.height = $(e).attr("height") || 200, this.scale = $(e).attr("scale") || 1, typeof Raphael == "undefined" ? (this.canvas = $("<canvas></canvas>").addClass("vex-canvas"), $(e).append(this.canvas), this.renderer = new Vex.Flow.Renderer(this.canvas[0], Vex.Flow.Renderer.Backends.CANVAS)) : (this.canvas = $("<div></div>").addClass("vex-canvas"), $(e).append(this.canvas), this.renderer = new Vex.Flow.Renderer(this.canvas[0], Vex.Flow.Renderer.Backends.RAPHAEL)), this.ctx_sel = $(e).find(".vex-canvas"), this.renderer.resize(this.width, this.height), this.ctx = this.renderer.getContext(), this.ctx.setBackgroundFillStyle(this.ctx_sel.css("background-color")), this.ctx.scale(this.scale, this.scale), this.editor = $(e).attr("editor") || "", this.show_errors = $(e).attr("show-errors") || "", this.editor_width = $(e).attr("editor_width") || this.width, this.editor_height = $(e).attr("editor_height") || 200; var t = this; this.editor == "true" && (this.text_area = $("<textarea></textarea>").addClass("editor").val(this.code), this.editor_error = $("<div></div>").addClass("editor-error"), $("#vextab").append($("<p/>")).append(this.editor_error), $("#vextab").append($("<p/>")).append(this.text_area), this.text_area.width(this.editor_width), this.text_area.height(this.editor_height), this.text_area.keyup(function () { t.timeoutID && window.clearTimeout(t.timeoutID), t.timeoutID = window.setTimeout(function () { t.code != t.text_area.val() && (t.code = t.text_area.val(), t.redraw()) }, 250) })), this.show_errors == "true" && (this.editor_error = $("<div></div>").addClass("editor-error"), $("#vextab").append($("<p/>")).append(this.editor_error)), this.artist = new Vex.Flow.Artist(10, 0, this.width, { scale: this.scale }), this.parser = new Vex.Flow.VexTab(this.artist), Vex.Flow.TabDiv.NOLOGO ? this.extra_height = 10 : (this.message = "vexflow.com", this.extra_height = 20), Vex.Flow.TabDiv.HEIGHT_ADJUSTMENT && (this.extra_height += Vex.Flow.TabDiv.HEIGHT_ADJUSTMENT), this.redraw() }, Vex.Flow.TabDiv.prototype.redraw = function () { var e = this; return Vex.BM("Total render time: ", function () { e.parse(), e.draw() }), this }, Vex.Flow.TabDiv.prototype.drawInternal = function () { return this.parser.isValid() ? this.artist.draw(this.renderer) : this }, Vex.Flow.TabDiv.prototype.parseInternal = function () { try { this.artist.reset(), this.parser.reset(), this.parser.parse(this.code), this.editor_error.empty() } catch (e) { this.editor_error && (this.editor_error.empty(), this.editor_error.append($("<div></div>").addClass("text").html("Sucky VexTab: " + e.message))) } return this }, Vex.Flow.TabDiv.prototype.parse = function () { var e = this; return Vex.BM("Parse time: ", function () { e.parseInternal() }), this }, Vex.Flow.TabDiv.prototype.draw = function () { var e = this; return Vex.BM("Draw time: ", function () { e.drawInternal() }), this }, Vex.Flow.TabDiv.start = function () { $(Vex.Flow.TabDiv.SEL).each(function (e) { new Vex.Flow.TabDiv(this) }) }, $(function () { /*Vex.Flow.TabDiv.SEL && Vex.Flow.TabDiv.start()*/ });// Generated by CoffeeScript 1.4.0
(function(){var e=[].slice,t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};Vex.Flow.Artist=function(){function u(e,t,n,r){this.x=e,this.y=t,this.width=n,this.options={font_face:"Arial",font_size:10,font_style:null,bottom_spacing:20,tab_stave_lower_spacing:10,note_stave_lower_spacing:0,scale:1},r!=null&&_.extend(this.options,r),this.reset()}var n,r,i,s,o;return u.DEBUG=!1,n=function(){var t;t=1<=arguments.length?e.call(arguments,0):[];if(Vex.Flow.Artist.DEBUG)return typeof console!="undefined"&&console!==null?console.log.apply(console,["(Vex.Flow.Artist)"].concat(e.call(t))):void 0},u.prototype.reset=function(){return this.tuning=new Vex.Flow.Tuning,this.key_manager=new Vex.Flow.KeyManager("C"),this.music_api=new Vex.Flow.Music,this.customizations={"font-size":this.options.font_size,"font-face":this.options.font_face,"font-style":this.options.font_style,"annotation-position":"bottom",scale:this.options.scale,width:this.width,"stave-distance":0,space:0},this.staves=[],this.tab_articulations=[],this.stave_articulations=[],this.last_y=this.y,this.current_duration="q",this.current_clef="treble",this.current_bends={},this.bend_start_index=null,this.bend_start_strings=null},u.prototype.setOptions=function(e){var r,i,s;n("setOptions: ",e),s=_.keys(this.customizations);for(r in e){i=e[r];if(!(t.call(s,r)>=0))throw new Vex.RERR("ArtistError","Invalid option '"+r+"'");this.customizations[r]=i}return this.last_y+=parseInt(this.customizations.space,10)},r=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;t!=null&&(c=t.stave),n!=null&&(f=n.stave),h=[],l=[],d=[],i=[],s=null,p=null;if(t!=null){S=t.voices;for(m=0,b=S.length;m<b;m++){a=S[m];if(_.isEmpty(a))continue;_.each(a,function(e){return e.setStave(c)}),v=(new Vex.Flow.Voice(Vex.Flow.TIME4_4)).setMode(Vex.Flow.Voice.Mode.SOFT),v.addTickables(a),h.push(v)}s=c,p=c}if(n!=null){x=n.voices;for(g=0,w=x.length;g<w;g++){a=x[g];if(_.isEmpty(a))continue;_.each(a,function(e){return e.setStave(f)}),v=(new Vex.Flow.Voice(Vex.Flow.TIME4_4)).setMode(Vex.Flow.Voice.Mode.SOFT),v.addTickables(a),l.push(v),i=Vex.Flow.Beam.applyAndGetBeams(v)}s=f,p=f}for(y=0,E=r.length;y<E;y++){a=r[y];if(_.isEmpty(a))continue;_.each(a,function(e){return e.setStave(p)}),v=(new Vex.Flow.Voice(Vex.Flow.TIME4_4)).setMode(Vex.Flow.Voice.Mode.SOFT),v.addTickables(a),d.push(v)}if(s!=null){o=[],u=new Vex.Flow.Formatter,t!=null&&(_.isEmpty(h)||u.joinVoices(h),o=h),n!=null&&(_.isEmpty(l)||u.joinVoices(l),o=o.concat(l)),_.isEmpty(r)||(u.joinVoices(d),o=o.concat(d)),_.isEmpty(o)||u.formatToStave(o,s),t!=null&&_.each(h,function(t){return t.draw(e,c)}),n!=null&&_.each(l,function(t){return t.draw(e,f)}),n!=null&&_.each(i,function(t){return t.setContext(e).draw()}),_.isEmpty(r)||_.each(d,function(t){return t.draw(e,p)});if(t!=null&&n!=null)return(new Vex.Flow.StaveConnector(n.stave,t.stave)).setContext(e).draw()}},u.prototype.render=function(e){var t,i,s,o,u,a,f,l,c,h,p,d,v,m;n("Render: ",this.options),this.closeBends(),e.resize(this.customizations.width*this.customizations.scale,(this.last_y+this.options.bottom_spacing)*this.customizations.scale),i=e.getContext(),i.scale(this.customizations.scale,this.customizations.scale),i.clear(),i.setFont(this.options.font_face,this.options.font_size,""),s=function(e,t){var n;n=_.last(t);if(n instanceof Vex.Flow.BarNote)return t.pop(),e.setEndBarType(n.getType())},p=this.staves;for(u=0,l=p.length;u<l;u++)o=p[u],n("Rendering staves."),o.tab!=null&&s(o.tab,o.tab_notes),o.note!=null&&s(o.note,o.note_notes),o.tab!=null&&o.tab.setContext(i).draw(),o.note!=null&&o.note.setContext(i).draw(),r(i,o.tab!=null?{stave:o.tab,voices:[o.tab_notes]}:null,o.note!=null?{stave:o.note,voices:[o.note_notes]}:null,o.text_voices);n("Rendering tab articulations."),d=this.tab_articulations;for(a=0,c=d.length;a<c;a++)t=d[a],t.setContext(i).draw();n("Rendering note articulations."),v=this.stave_articulations,m=[];for(f=0,h=v.length;f<h;f++)t=v[f],m.push(t.setContext(i).draw());return m},u.prototype.draw=function(e){return this.render(e)},u.prototype.getNoteForFret=function(e,t){var n,r,i,s,o,u,a,f;return a=this.tuning.getNoteForFret(e,t),f=Vex.Flow.keyProperties(a),u=this.key_manager.selectNote(f.key),n=null,u.change&&(n=u.accidental==null?"n":u.accidental),r=u.note,i=f.octave,o=this.music_api.getNoteParts(f.key).root,s=this.music_api.getNoteParts(u.note).root,s==="b"&&o==="c"?i--:s==="c"&&o==="b"&&i++,[r,i,n]},u.prototype.getNoteForABC=function(e,t){var n,r,i;return r=e.key,i=t,n=e.accidental,[r,i,n]},u.prototype.addStaveNote=function(e,t,n){var r,i,s,o,u,a;n==null&&(n=!1),o=_.last(this.staves).note_notes,s=new Vex.Flow.StaveNote({keys:e,duration:this.current_duration+(n?"r":""),clef:this.current_clef,auto_stem:n?!1:!0});for(i=u=0,a=t.length;u<a;i=++u)r=t[i],r!=null&&s.addAccidental(i,new Vex.Flow.Accidental(r));return this.current_duration[this.current_duration.length-1]==="d"&&s.addDotToAll(),o.push(s)},u.prototype.addTabNote=function(e){var t,n;return n=_.last(this.staves).tab_notes,t=new Vex.Flow.TabNote({positions:e,duration:this.current_duration}),n.push(t)},o=function(e,t){return e+(t?"d":"")},u.prototype.setDuration=function(e,t){return t==null&&(t=!1),n("setDuration: ",e,t),this.current_duration=o(e,t)},u.prototype.addBar=function(e){var t,r,i;n("addBar: ",e),this.closeBends(),i=_.last(this.staves),t=Vex.Flow.Barline.type,e=function(){switch(e){case"single":return t.SINGLE;case"double":return t.DOUBLE;case"end":return t.END;case"repeat-begin":return t.REPEAT_BEGIN;case"repeat-end":return t.REPEAT_END;case"repeat-both":return t.REPEAT_BOTH;default:return t.SINGLE}}(),r=(new Vex.Flow.BarNote).setType(e),i.tab_notes.push(r);if(i.note!=null)return i.note_notes.push(r)},s=function(e,t){var n,r;return n=Vex.Flow.Bend.UP,r="",e>t?n=Vex.Flow.Bend.DOWN:r=function(){switch(Math.abs(t-e)){case 1:return"1/2";case 2:return"Full";case 3:return"1 1/2";default:return"Bend to "+t}}(),{type:n,text:r}},u.prototype.openBends=function(e,t,r,i){var o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;n("openBends",e,t,r,i),d=_.last(this.staves).tab_notes,p=e,h=r,_.isEmpty(this.current_bends)?(this.bend_start_index=d.length-2,this.bend_start_strings=r):(p=d[this.bend_start_index],h=this.bend_start_strings),o=p.getPositions(),l=t.getPositions(),w=[];for(a=g=0,y=h.length;g<y;a=++g)f=h[a],c=i[a],u=e.getPositions()[r[a]],v=l[c],(b=(m=this.current_bends)[f])==null&&(m[f]=[]),w.push(this.current_bends[f].push(s(u.fret,v.fret)));return w},u.prototype.closeBends=function(e){var t,r,i,s,o,u,a,f,l,c,h,p;e==null&&(e=1);if(this.bend_start_index==null)return;n("closeBends("+e+")"),o=_.last(this.staves).tab_notes,h=this.current_bends;for(r in h){u=h[r],i=[];for(a=0,l=u.length;a<l;a++)t=u[a],i.push(t);o[this.bend_start_index].addModifier(new Vex.Flow.Bend(null,null,i),r)}p=o.slice(this.bend_start_index+1,+(o.length-2+e)+1||9e9);for(f=0,c=p.length;f<c;f++)s=p[f],s.setGhost(!0);return this.current_bends={},this.bend_start_index=null},u.prototype.makeTuplets=function(e,t){var r,i,s;n("makeTuplets",e,t),t==null&&(t=e);if(!_.last(this.staves).note)return;i=_.last(this.staves).note_notes,s=_.last(this.staves).tab_notes;if(i.length<t)throw new Vex.RERR("ArtistError","Not enough notes for tuplet");return r=new Vex.Flow.Tuplet(i.slice(i.length-t)),this.stave_articulations.push(r),new Vex.Flow.Tuplet(s.slice(s.length-t))},i=function(e){return e.match(/^\.(a[^\/]*)\/(t|b)[^.]*\./)},u.prototype.makeScoreArticulation=function(e){var t,n,r,s,o;return n=i(e),n!=null?(o=n[1],s=n[2],t=Vex.Flow.Modifier.Position,r=s==="t"?t.ABOVE:t.BELOW,(new Vex.Flow.Articulation(o)).setPosition(r)):null},u.prototype.makeAnnotation=function(e){var t,n,r,i,s,o,u,a,f;i=this.customizations["font-face"],s=this.customizations["font-size"],o=this.customizations["font-style"],n=this.customizations["annotation-position"],t=Vex.Flow.Annotation.VerticalJustify,r=n==="top"?t.TOP:t.BOTTOM,a=function(e,t){return t==null&&(t=r),(new Vex.Flow.Annotation(e)).setFont(i,s,o).setVerticalJustification(t)},f=e.match(/^\.([^-]*)-([^-]*)-([^.]*)\.(.*)/);if(f!=null)return i=f[1],s=f[2],o=f[3],e=f[4],e?a(e):null;f=e.match(/^\.([^.]*)\.(.*)/);if(f!=null){u=r,e=f[2];switch(f[1]){case"big":o="bold",s="14";break;case"italic":case"italics":i="Times",o="italic";break;case"medium":s="12";break;case"top":u=t.TOP,this.customizations["annotation-position"]="top";break;case"bottom":u=t.BOTTOM,this.customizations["annotation-position"]="bottom"}return e?a(e,u):null}return a(e)},u.prototype.addAnnotations=function(e){var t,n,r,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;o=_.last(this.staves),u=o.note_notes,f=o.tab_notes;if(e.length>f.length)throw new Vex.RERR("ArtistError","More annotations than note elements");if(o.tab){m=f.slice(f.length-e.length);for(n=l=0,p=m.length;l<p;n=++l)a=m[n],i(e[n])?(s=this.makeScoreArticulation(e[n]),a.addModifier(s,0)):(t=this.makeAnnotation(e[n]),t&&a.addModifier(this.makeAnnotation(e[n]),0))}else{g=u.slice(u.length-e.length);for(n=c=0,d=g.length;c<d;n=++c)r=g[n],i(e[n])||(t=this.makeAnnotation(e[n]),t&&r.addAnnotation(0,this.makeAnnotation(e[n])))}if(o.note){y=u.slice(u.length-e.length),b=[];for(n=h=0,v=y.length;h<v;n=++h)r=y[n],s=this.makeScoreArticulation(e[n]),s!=null?b.push(r.addArticulation(0,s)):b.push(void 0);return b}},u.prototype.addTabArticulation=function(e,t,r,i,s){var o;n("addTabArticulations: ",e,t,r,i,s),e==="t"&&r.addModifier((new Vex.Flow.Annotation("T")).setVerticalJustification(Vex.Flow.Annotation.VerticalJustify.BOTTOM));if(_.isEmpty(i)&&_.isEmpty(s))return;o=null,e==="s"&&(o=new Vex.Flow.TabSlide({first_note:t,last_note:r,first_indices:i,last_indices:s}));if(e==="h"||e==="p")o=new Vex.Flow.TabTie({first_note:t,last_note:r,first_indices:i,last_indices:s},e.toUpperCase());if(e==="T"||e==="t")o=new Vex.Flow.TabTie({first_note:t,last_note:r,first_indices:i,last_indices:s}," ");e==="b"&&this.openBends(t,r,i,s);if(o!=null)return this.tab_articulations.push(o)},u.prototype.addStaveArticulation=function(e,t,r,i,s){var o;n("addStaveArticulations: ",e,t,r,i,s),o=null;if(e==="b"||e==="s"||e==="h"||e==="p"||e==="t"||e==="T")o=new Vex.Flow.StaveTie({first_note:t,last_note:r,first_indices:i,last_indices:s});if(o!=null)return this.stave_articulations.push(o)},u.prototype.getPreviousNoteIndex=function(){var e,t,n;n=_.last(this.staves).tab_notes,e=2;while(e<=n.length){t=n[n.length-e];if(t instanceof Vex.Flow.TabNote)return n.length-e;e++}return-1},u.prototype.addDecorator=function(e){var t,r,i,s,o,u;n("addDecorator: ",e);if(e==null)return;s=_.last(this.staves),o=s.tab_notes,i=s.note_notes,t=null,r=null,e==="v"&&(t=new Vex.Flow.Vibrato),e==="V"&&(t=(new Vex.Flow.Vibrato).setHarsh(!0)),e==="u"&&(t=(new Vex.Flow.Articulation("a|")).setPosition(Vex.Flow.Modifier.Position.BOTTOM),r=(new Vex.Flow.Articulation("a|")).setPosition(Vex.Flow.Modifier.Position.BOTTOM)),e==="d"&&(t=(new Vex.Flow.Articulation("am")).setPosition(Vex.Flow.Modifier.Position.BOTTOM),r=(new Vex.Flow.Articulation("am")).setPosition(Vex.Flow.Modifier.Position.BOTTOM)),t!=null&&_.last(o).addModifier(t,0);if(r!=null)return(u=_.last(i))!=null?u.addArticulation(0,r):void 0},u.prototype.addArticulations=function(e){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;n("addArticulations: ",e),d=_.last(this.staves),m=d.tab_notes,v=d.note_notes;if(_.isEmpty(m)||_.isEmpty(e)){this.closeBends(0);return}s=_.last(m),o=!1,S=["b","s","h","p","t","T","v","V"];for(w=0,E=S.length;w<E;w++){y=S[w],a=function(){var t,n,i;i=[];for(u=t=0,n=e.length;t<n;u=++t)r=e[u],r!=null&&r===y&&i.push(u);return i}();if(_.isEmpty(a))continue;y==="b"&&(o=!0),c=this.getPreviousNoteIndex(),n("prev_tab_note: ",p),c===-1?(p=null,h=null):(p=m[c],g=function(){var e,n,r,i;r=s.getPositions(),i=[];for(u=e=0,n=r.length;e<n;u=++e)f=r[u],t.call(a,u)>=0&&i.push(f.str);return i}(),b=function(){var e,n,r,i,s;r=p.getPositions(),s=[];for(u=e=0,n=r.length;e<n;u=++e)l=r[u],(i=l.str,t.call(g,i)>=0)&&s.push(l.str);return s}(),h=function(){var e,n,r,i,s;r=p.getPositions(),s=[];for(u=e=0,n=r.length;e<n;u=++e)f=r[u],(i=f.str,t.call(b,i)>=0)&&s.push(u);return s}(),i=function(){var e,n,r,i,o;r=s.getPositions(),o=[];for(u=e=0,n=r.length;e<n;u=++e)f=r[u],(i=f.str,t.call(b,i)>=0)&&o.push(u);return o}()),d.tab!=null&&this.addTabArticulation(y,p,s,h,i),d.note!=null&&this.addStaveArticulation(y,v[c],_.last(v),h,i)}if(!o)return this.closeBends(0)},u.prototype.addRest=function(e){var t,r;return n("addRest: ",e),this.closeBends(),e.position===0?this.addStaveNote(["r/4"],[],!0):(t=this.tuning.getNoteForFret(parseInt(e.position*2,10),4),this.addStaveNote([t],[],!0)),r=_.last(this.staves).tab_notes,r.push(new Vex.Flow.GhostNote(this.current_duration))},u.prototype.addChord=function(e,t,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,A,O,M,D;if(_.isEmpty(e))return;n("addTabChord: ",e),S=_.last(this.staves),E=[],s=[],u=[],c=[],x=[],h=[],y=0,l=_.first(e).string,f=0;for(T=0,k=e.length;T<k;T++){m=e[T],y++;if(m.abc!=null||m.string!==l)f=0,l=m.string;E[f]==null&&(E[f]=[],s[f]=[],x[f]=[],u[f]=[],c[f]=[]),O=[null,null,null],d=O[0],v=O[1],i=O[2];if(m.fret!=null)M=this.getNoteForFret(m.fret,m.string),d=M[0],v=M[1],i=M[2];else{if(m.abc==null)throw new Vex.RERR("ArtistError","No note specified");D=this.getNoteForABC(m.abc,m.string),d=D[0],v=D[1],i=D[2],m.fret="X"}a=m.time!=null?{time:m.time,dot:m.dot}:null,E[f].push(""+d+"/"+v),s[f].push(i),x[f].push({fret:m.fret,str:m.string}),m.articulation!=null&&u[f].push(m.articulation),h[f]=a,m.decorator!=null&&(c[f]=m.decorator),f++}for(p=N=0,A=E.length;N<A;p=++N)w=E[p],b=this.current_duration,h[p]!=null&&this.setDuration(h[p].time,h[p].dot),this.addTabNote(x[p]),S.note!=null&&this.addStaveNote(w,s[p]),this.addArticulations(u[p]),c[p]!=null&&this.addDecorator(c[p]);if(t!=null){o=[];for(g=C=1;1<=y?C<=y:C>=y;g=1<=y?++C:--C)o.push(t);this.addArticulations(o)}if(r!=null)return this.addDecorator(r)},u.prototype.addNote=function(e){return this.addChord([e])},u.prototype.addTextVoice=function(){return _.last(this.staves).text_voices.push([])},u.prototype.setTextFont=function(e){var t;if(e!=null){t=e.match(/([^-]*)-([^-]*)-([^.]*)/);if(t!=null)return this.customizations["font-face"]=t[1],this.customizations["font-size"]=parseInt(t[2],10),this.customizations["font-style"]=t[3]}},u.prototype.addTextNote=function(e,t,n,r,i){var s,o,u,a,f,l,c,h;t==null&&(t=0),n==null&&(n="center"),r==null&&(r=!0),i==null&&(i=!1),h=_.last(this.staves).text_voices;if(_.isEmpty(h))throw new Vex.RERR("ArtistError","Can't add text note without text voice");return o=this.customizations["font-face"],u=this.customizations["font-size"],a=this.customizations["font-style"],f=function(){switch(n){case"center":return Vex.Flow.TextNote.Justification.CENTER;case"left":return Vex.Flow.TextNote.Justification.LEFT;case"right":return Vex.Flow.TextNote.Justification.RIGHT;default:return Vex.Flow.TextNote.Justification.CENTER}}(),s=i?"b":this.current_duration,c={text:e,duration:s,smooth:r,ignore_ticks:i,font:{family:o,size:u,weight:a}},e[0]==="#"&&(c.glyph=e.slice(1)),l=(new Vex.Flow.TextNote(c)).setLine(t).setJustification(f),_.last(h).push(l)},u.prototype.addStave=function(e){var t,r,i,s;r={tuning:"standard",clef:"treble",key:"C",notation:"false",tablature:"true"},_.extend(r,e),n("addTabStave: ",e),i=null,t=null,s=40,r.notation==="true"&&(t=(new Vex.Flow.Stave(this.x,this.last_y,this.customizations.width-20)).addClef(r.clef).addKeySignature(r.key),r.time!=null&&t.addTimeSignature(r.time),this.last_y+=t.getHeight()+this.options.note_stave_lower_spacing+parseInt(this.customizations["stave-distance"],10),s=t.getNoteStartX(),this.current_clef=r.clef),r.tablature==="true"&&(i=(new Vex.Flow.TabStave(this.x,this.last_y,this.customizations.width-20)).addTabGlyph().setNoteStartX(s),this.last_y+=i.getHeight()+this.options.tab_stave_lower_spacing),this.closeBends(),this.staves.push({tab:i,note:t,tab_notes:[],note_notes:[],text_voices:[]}),this.tuning.setTuning(r.tuning),this.key_manager.setKey(r.key)},u}()}).call(this);// Generated by CoffeeScript 1.4.0
(function(){var e=[].slice,t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};Vex.Flow.VexTab=function(){function i(e){this.artist=e,this.reset()}var n,r;return i.DEBUG=!1,n=function(){var t;t=1<=arguments.length?e.call(arguments,0):[];if(Vex.Flow.VexTab.DEBUG)return typeof console!="undefined"&&console!==null?console.log.apply(console,["(Vex.Flow.VexTab)"].concat(e.call(t))):void 0},r=function(e,t){return new Vex.RERR("ParseError",""+t+" in line "+e._l+" column "+e._c)},i.prototype.reset=function(){return this.valid=!1,this.elements=!1},i.prototype.isValid=function(){return this.valid},i.prototype.parseStaveOptions=function(e){var n,i,s,o,u,a,f,l,c;u={notation:"false",tablature:"true"};if(e==null)return u;s=null;for(a=0,f=e.length;a<f;a++){o=e[a],i=function(e){return r(o,e)},u[o.key]=o.value;switch(o.key){case"notation":case"tablature":s=o;if((l=o.value)!=="true"&&l!=="false")throw i("'"+o.key+"' must be 'true' or 'false'");break;case"key":if(!_.has(Vex.Flow.keySignature.keySpecs,o.value))throw i("Invalid key signature '"+o.value+"'");break;case"clef":n=["treble","bass","tenor","alto","percussion"];if(c=o.value,t.call(n,c)<0)throw i("'clef' must be one of "+n.join(", "));break;case"time":try{new Vex.Flow.TimeSignature(o.value)}catch(h){throw i("Invalid time signature: '"+o.value+"'")}break;case"tuning":try{new Vex.Flow.Tuning(o.value)}catch(h){throw i("Invalid tuning: '"+o.value+"'")}break;default:throw i("Invalid option '"+o.key+"'")}}if(u.notation==="false"&&u.tablature==="false")throw r(s,"Both 'notation' and 'tablature' can't be invisible");return u},i.prototype.parseCommand=function(e){e.command==="bar"&&this.artist.addBar(e.type),e.command==="tuplet"&&this.artist.makeTuplets(e.params.tuplet,e.params.notes),e.command==="annotations"&&this.artist.addAnnotations(e.params);if(e.command==="rest")return this.artist.addRest(e.params)},i.prototype.parseChord=function(e){return this.artist.addChord(_.map(e.chord,function(e){return _.pick(e,"time","dot","fret","abc","string","articulation","decorator")}),e.articulation,e.decorator)},i.prototype.parseFret=function(e){return this.artist.addNote(_.pick(e,"time","dot","fret","string","articulation","decorator"))},i.prototype.parseABC=function(e){return this.artist.addNote(_.pick(e,"time","dot","abc","string","articulation","decorator"))},i.prototype.parseStaveElements=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],t.time&&this.artist.setDuration(t.time,t.dot),t.command&&this.parseCommand(t),t.chord&&this.parseChord(t),t.fret&&this.parseFret(t),t.abc?i.push(this.parseABC(t)):i.push(void 0);return i},i.prototype.parseStaveText=function(e){var t,n,i,s,o,u,a,f,l,c,h,p,d=this;_.isEmpty(e)||this.artist.addTextVoice(),u=0,o="center",a=!0,s=null,t=function(){return d.artist.addTextNote("",0,o,!1,!0)},i=function(e){var t;t=!1,e[0]==="|"&&(t=!0,e=e.slice(1));try{return d.artist.addTextNote(e,u,o,a,t)}catch(n){throw r(f,"Bad text or duration. Did you forget a comma?"+n)}},p=[];for(c=0,h=e.length;c<h;c++){f=e[c],l=f.text.trim();if(l.match(/\.font=.*/))s=l.slice(6),p.push(this.artist.setTextFont(s));else if(l[0]===":")p.push(this.artist.setDuration(l));else if(l[0]==="."){n=l.slice(1);switch(n){case"center":case"left":case"right":p.push(o=n);break;case"strict":p.push(a=!1);break;case"smooth":p.push(a=!0);break;case"bar":case"|":p.push(t());break;default:p.push(u=parseInt(l.slice(1),10))}}else l==="|"?p.push(t()):l.slice(0,2)==="++"?p.push(this.artist.addTextVoice()):p.push(i(l))}return p},i.prototype.generate=function(){var e,t,n,i,s,o,u,a,f,l;a=this.elements,l=[];for(i=0,o=a.length;i<o;i++){n=a[i];switch(n.element){case"stave":this.artist.addStave(this.parseStaveOptions(n.options)),n.notes!=null&&this.parseStaveElements(n.notes),n.text!=null?l.push(this.parseStaveText(n.text)):l.push(void 0);break;case"options":t={},f=n.params;for(s=0,u=f.length;s<u;s++)e=f[s],t[e.key]=e.value;try{l.push(this.artist.setOptions(t))}catch(c){throw r(n,c.message)}break;default:throw r(n,"Invalid keyword '"+n.element+"'")}}return l},i.prototype.parse=function(e){var t,r;vextab_parser.parseError=function(e,t){throw n("VexTab parse error: ",e,t),e="Unexpected text '"+t.text+"' at line "+t.loc.first_line+" column "+t.loc.first_column+".",new Vex.RERR("ParseError",e)};if(e==null)throw new Vex.RERR("ParseError","No code");return n("Parsing:\n"+e),r=function(){var n,r,i,s;i=e.split(/\r\n|\r|\n/),s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push(t.trim());return s}(),this.elements=vextab_parser.parse(r.join("\n")),this.elements&&(this.generate(),this.valid=!0),this.elements},i}()}).call(this);